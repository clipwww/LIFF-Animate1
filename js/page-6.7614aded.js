(window.webpackJsonp=window.webpackJsonp||[]).push([["page-6"],{3104:function(e,t,n){"use strict";var i=n("7a23"),r=n("d282"),o=n("ea8e"),a=n("02de"),c=n("a8c1"),u=n("93f2"),d=n("3548"),f=n("db17"),l=n("095c"),s=Object(r.a)("sticky"),b=s[0],j=s[1];t.a=b({props:{zIndex:[Number,String],container:null,offsetTop:{type:[Number,String],default:0}},emits:["scroll"],setup:function(e,t){var n=t.emit,r=t.slots,s=Object(i.E)(),b=Object(u.b)(s),O=Object(i.D)({fixed:!1,height:0,transform:0}),g=Object(i.e)((function(){return Object(o.c)(e.offsetTop)})),v=Object(i.e)((function(){if(O.fixed){var t=g.value?g.value+"px":void 0,n=O.transform?"translate3d(0, "+O.transform+"px, 0)":void 0;return{top:t,zIndex:void 0!==e.zIndex?+e.zIndex:void 0,transform:n}}})),h=function(e){n("scroll",{scrollTop:e,isFixed:O.fixed})},p=function(){if(s.value&&!Object(a.a)(s)){O.height=s.value.offsetHeight;var t=e.container,n=Object(c.b)(window),i=Object(c.a)(s.value);if(t){var r=i+t.offsetHeight;if(n+g.value+O.height>r){var o=O.height+n-r;return o<O.height?(O.fixed=!0,O.transform=-(o+g.value)):O.fixed=!1,void h(n)}}n+g.value>i?(O.fixed=!0,O.transform=0):O.fixed=!1,h(n)}};return Object(d.b)("scroll",p,{target:b}),function(e,t){if(f.b&&window.IntersectionObserver){var n=new IntersectionObserver((function(e){t(e[0].intersectionRatio>0)}),{root:document.body}),r=function(){e.value&&n.unobserve(e.value)};Object(i.v)(r),Object(i.t)(r),Object(l.a)((function(){e.value&&n.observe(e.value)}))}}(s,p),function(){var e=O.fixed,t=O.height,n={height:e?t+"px":void 0};return Object(i.j)("div",{ref:s,style:n},[Object(i.j)("div",{class:j({fixed:e}),style:v.value},[null==r.default?void 0:r.default()])])}}})},fb45:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),r=Object(i.Q)("data-v-4b62bb81");Object(i.C)("data-v-4b62bb81");var o=Object(i.i)("搜索"),a={class:"my-1"},c={class:"text-xs text-gray-500"};Object(i.A)();var u=r((function(e,t,n,u,d,f){var l=Object(i.G)("Button"),s=Object(i.G)("VanSearch"),b=Object(i.G)("Sticky"),j=Object(i.G)("Cell"),O=Object(i.G)("List"),g=Object(i.G)("PullRefresh");return Object(i.z)(),Object(i.g)(g,{modelValue:e.refreshing,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.refreshing=t}),onRefresh:t[5]||(t[5]=function(t){return e.fetchData(!0,!0)})},{default:r((function(){return[Object(i.j)(b,null,{default:r((function(){return[Object(i.j)(s,{modelValue:e.keyword,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t}),"show-action":"",placeholder:"請輸入關鍵字",onSearch:e.fetchData},{action:r((function(){return[Object(i.j)(l,{type:"primary",onClick:t[1]||(t[1]=function(t){return e.fetchData(!0)})},{default:r((function(){return[o]})),_:1})]})),_:1},8,["modelValue","onSearch"])]})),_:1}),Object(i.j)(O,{loading:e.loading,"onUpdate:loading":t[3]||(t[3]=function(t){return e.loading=t}),finished:e.finished,"loading-text":"努力搜尋中",onLoad:e.fetchData},{default:r((function(){return[(Object(i.z)(!0),Object(i.g)(i.a,null,Object(i.F)(e.list,(function(t){return Object(i.z)(),Object(i.g)(j,{key:t.id,title:t.title,size:"large","is-link":"",center:"",onClick:function(n){return e.downloadDanmaku(t)}},{label:r((function(){return[Object(i.j)("div",a,"彈幕量: "+Object(i.K)(t.count),1),Object(i.j)("div",c,"來源: "+Object(i.K)(t.source),1)]})),_:2},1032,["title","onClick"])})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue"])})),d=(n("99af"),n("4de4"),n("96cf"),n("5530")),f=n("1da1"),l=n("3104"),s=n("44bf"),b=n("7d5e"),j=n("58e6"),O=n("7744"),g=n("d282"),v=n("02de"),h=n("93f2"),p=n("8c53"),m=n("3548"),x=n("4eda"),w=n("543e");function k(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(i.o)(e)}var y=Object(g.a)("list"),S=y[0],_=y[1],z=y[2],C=S({props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,offset:{type:[Number,String],default:300},direction:{type:String,default:"down"},immediateCheck:{type:Boolean,default:!0}},emits:["load","update:error","update:loading"],setup:function(e,t){var n=t.emit,r=t.slots,o=Object(i.E)(!1),a=Object(i.E)(),c=Object(i.E)(),u=Object(h.b)(a),d=function(){Object(i.q)((function(){if(!(o.value||e.finished||e.error)){var t=e.offset,i=e.direction,r=Object(p.a)(u);if(!r.height||Object(v.a)(a))return!1;var d=Object(p.a)(c);("up"===i?r.top-d.top<=t:d.bottom-r.bottom<=t)&&(o.value=!0,n("update:loading",!0),n("load"))}}))},f=function(){if(e.finished){var t=r.finished?r.finished():e.finishedText;if(t)return Object(i.j)("div",{class:_("finished-text")},k(t)?t:{default:function(){return[t]}})}},l=function(){n("update:error",!1),d()},s=function(){if(e.error){var t=r.error?r.error():e.errorText;if(t)return Object(i.j)("div",{class:_("error-text"),onClick:l},k(t)?t:{default:function(){return[t]}})}},b=function(){if(o.value&&!e.finished)return Object(i.j)("div",{class:_("loading")},[r.loading?r.loading():Object(i.j)(w.a,{size:16},{default:function(){return[e.loadingText||z("loading")]}})])};return Object(i.O)([function(){return e.loading},function(){return e.finished}],d),Object(i.y)((function(){o.value=e.loading})),Object(i.w)((function(){e.immediateCheck&&d()})),Object(x.a)({check:d}),Object(m.b)("scroll",d,{target:u}),function(){var t=null==r.default?void 0:r.default(),n=Object(i.j)("div",{ref:c,class:_("placeholder")},null);return Object(i.j)("div",{ref:a,role:"feed",class:_(),"aria-busy":o.value},["down"===e.direction?t:n,b(),f(),s(),"up"===e.direction?t:n])}}}),D=n("b650"),T=n("d961"),I=n("08ba"),V=Object(i.k)({components:{VanSearch:T.a,Button:D.a,List:C,Cell:O.b,PullRefresh:j.a,Skeleton:b.a,Image:s.a,Sticky:l.a},setup:function(){var e=Object(i.D)({keyword:"",list:[],refreshing:!1,loading:!1,finished:!1,page:1});function t(){return(t=Object(f.a)(regeneratorRuntime.mark((function t(){var n,i,r,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]&&o[0],i=o.length>1&&void 0!==o[1]&&o[1],n&&(e.list=[],e.page=1,e.finished=!1),i&&(e.refreshing=!0),e.loading=!0,t.next=7,I.d.getList(e.keyword,e.page,e.keyword?"comment_cnt":"group_id");case 7:if(r=t.sent,e.loading=!1,e.refreshing=!1,r.success){t.next=13;break}return e.finished=!0,t.abrupt("return");case 13:e.list=e.list.concat(r.items.filter((function(e){return e.group_id}))),e.page+=1,e.page>=r.page.pageAmount&&(e.finished=!0);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.a)(Object(d.a)({},Object(i.L)(e)),{},{fetchData:function(){return t.apply(this,arguments)},downloadDanmaku:function(e){var t=e.group_id;window.open("".concat(I.c,"/himawari/").concat(t,"/danmaku?mode=download&group=1"))}})}});V.render=u,V.__scopeId="data-v-4b62bb81",t.default=V}}]);